<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Custom Markdown Parser</title>
    <style>
        body { display: flex; height: 100vh; margin: 0; }

        #input, #output { padding: 1em; flex: 1; }

        h1, h2 { border-bottom: 1px solid lightgrey; }
    </style>
    <script>
        function parse() {
            
            const out = document.getElementById("output");
            out.innerHTML = "";
            
            const lines = document.getElementById("input").value.split("\n");

            for (const line of lines) {

                // skip blank lines
                if (line.trim().length === 0)
                    continue;

                // prefix:data pairs (can't do this for lists or embeds)
                if (line.indexOf("### ") == 0) {
                    out.innerHTML += `<h3>${ line.substring(4) }</h3>`;
                } else if (line.indexOf("## ") == 0) {
                    out.innerHTML += `<h2>${ line.substring(3) }</h2>`;
                } else if (line.indexOf("# ") == 0) {
                    out.innerHTML += `<h1>${ line.substring(2) }</h1>`;
                } else {
                    out.innerHTML += `<p>${ line }</p>`;
                }
            }
        }
    </script>
</head>
<body onload="parse();">
    <textarea id="input" oninput="parse();">
# Custom Markdown Parser
        
## Lists

### Unordered

- Apples
- Oranges
- Pears

### Checkbox

[X] Mix flour and eggs.
[ ] Pour into tray.
[ ] Bake for 30 minutes.

## Line merging

This line will not get merged.
Hi im another line.

This line will get merged
+with this line.</textarea>

    <div id="output"></div>
</body>

</html>
