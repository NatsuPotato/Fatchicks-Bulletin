<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Random Program Interpreter</title>
    <script type="module">
        const code = document.getElementById("code");

        function recolor() {
            // https://developer.mozilla.org/en-US/docs/Web/API/Selection
            const start =  window.getSelection().anchorOffset;
            
            code.innerHTML = code.innerText.replaceAll("cats", "<span style='color: red;'>cats</span>");

            const range = document.createRange();
            range.setStart(code, start);
            range.setEnd(code, start);
            
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
        }

        recolor();
        code.addEventListener("input", recolor);
    </script>
</head>
<body>
    <div id="code" style="tab-size: 4; padding: 1em; border: 1px solid grey; height: 30em;" spellcheck="false" autocorrect="off" autocapitalize="none" translate="no" contenteditable="true" role="textbox" aria-multiline="true">
        I really like cats! If you don't like cats, don't buy cats!
    </div>
</body>
</html>
